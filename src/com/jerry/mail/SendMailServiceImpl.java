package com.jerry.mail;

import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.ThreadPoolExecutor;

public class SendMailServiceImpl implements SendMailService {

	@Override
	public void sendMail(final String to, final String subject, final String content) {
		ThreadPoolExecutor taskExecutor = new ScheduledThreadPoolExecutor(10);
		taskExecutor.execute(new Runnable() {

			@Override
			public void run() {
				synchronized (SendMailServiceImpl.class) {
					SendMail sendMail = SendMail.getInstance();
					sendMail.setSubject(subject);
					sendMail.setTo(to);
					sendMail.setContent(content);
					long start = System.currentTimeMillis();
					sendMail.send();
					long end = System.currentTimeMillis();
					System.out.println("用时 ：" + (end - start) + "ms");
					System.out.println(Thread.currentThread() + "发送完成");
				}
			}
		});
	}
	
	public static void main(String[] args) {
		SendMailService service = new SendMailServiceImpl();
		
		String content = "<div style=\"overflow: hidden; position: relative; text-align: left; width: 1349px; height: 350px; cursor: default;\"><svg version=\"1.1\" style=\"position: absolute; width: 1349px; height: 350px; left: 0px; top: 0px;\"><g><path cs=\"100,100\" d=\"M0.5,0.5 L1347.5,0.5 L1347.5,348.5 L0.5,348.5 Z\" fill=\"#FFFFFF\" stroke=\"#000000\" fill-opacity=\"0\" stroke-width=\"1\" stroke-opacity=\"0\"></path><path cs=\"100,100\" d=\"M0.5,0.5 L1285.5,0.5 L1285.5,273.5 L0.5,273.5 Z\" fill=\"#FFFFFF\" stroke=\"#000000\" fill-opacity=\"0\" stroke-width=\"1\" stroke-opacity=\"0\" transform=\"translate(43,40)\"></path></g><g><g transform=\"translate(43,40)\"><g><path cs=\"100,100\" d=\"M92.5,0.5 L92.5,5.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"1\" stroke=\"#000000\" transform=\"translate(0,273)\"></path></g><g><path cs=\"100,100\" d=\"M275.5,0.5 L275.5,5.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"1\" stroke=\"#000000\" transform=\"translate(0,273)\"></path></g><g><path cs=\"100,100\" d=\"M459.5,0.5 L459.5,5.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"1\" stroke=\"#000000\" transform=\"translate(0,273)\"></path></g><g><path cs=\"100,100\" d=\"M643.5,0.5 L643.5,5.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"1\" stroke=\"#000000\" transform=\"translate(0,273)\"></path></g><g><path cs=\"100,100\" d=\"M826.5,0.5 L826.5,5.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"1\" stroke=\"#000000\" transform=\"translate(0,273)\"></path></g><g><path cs=\"100,100\" d=\"M1010.5,0.5 L1010.5,5.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"1\" stroke=\"#000000\" transform=\"translate(0,273)\"></path></g><g><path cs=\"100,100\" d=\"M1193.5,0.5 L1193.5,5.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"1\" stroke=\"#000000\" transform=\"translate(0,273)\"></path></g></g><g transform=\"translate(43,40)\" visibility=\"visible\"><g><path cs=\"100,100\" d=\"M0.5,273.5 L0.5,273.5 L1285.5,273.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0.15\" stroke=\"#000000\"></path></g><g><path cs=\"100,100\" d=\"M0.5,239.5 L0.5,239.5 L1285.5,239.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0.15\" stroke=\"#000000\"></path></g><g><path cs=\"100,100\" d=\"M0.5,205.5 L0.5,205.5 L1285.5,205.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0.15\" stroke=\"#000000\"></path></g><g><path cs=\"100,100\" d=\"M0.5,171.5 L0.5,171.5 L1285.5,171.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0.15\" stroke=\"#000000\"></path></g><g><path cs=\"100,100\" d=\"M0.5,137.5 L0.5,137.5 L1285.5,137.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0.15\" stroke=\"#000000\"></path></g><g><path cs=\"100,100\" d=\"M0.5,102.5 L0.5,102.5 L1285.5,102.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0.15\" stroke=\"#000000\"></path></g><g><path cs=\"100,100\" d=\"M0.5,68.5 L0.5,68.5 L1285.5,68.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0.15\" stroke=\"#000000\"></path></g><g><path cs=\"100,100\" d=\"M0.5,34.5 L0.5,34.5 L1285.5,34.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0.15\" stroke=\"#000000\"></path></g><g><path cs=\"100,100\" d=\"M0.5,0.5 L0.5,0.5 L1285.5,0.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0.15\" stroke=\"#000000\"></path></g></g></g><g></g><g><g transform=\"translate(43,40)\"><g clip-path=\"url(#AmChartsEl-15)\"><path cs=\"100,100\" d=\"M92,3 Q103,13,125,35 Q146,58,172,83 Q198,108,225,130 Q252,153,275,164 Q298,175,321,179 Q344,182,367,182 Q390,182,413,180 Q436,178,459,177 Q482,176,505,171 Q528,165,551,160 Q574,154,597,150 Q620,146,643,147 Q666,148,689,154 Q712,160,735,168 Q757,176,780,184 Q803,192,826,198 Q849,204,872,212 Q895,220,918,227 Q941,234,964,239 Q987,243,1010,242 Q1033,241,1056,233 Q1079,224,1102,214 Q1124,204,1147,194 Q1170,185,1193,181M0,0 L0,0\" fill=\"#00BBCC\" fill-opacity=\"0\" stroke-width=\"2\" stroke-opacity=\"1\" stroke=\"#00BBCC\"></path></g><clipPath id=\"AmChartsEl-15\"><rect x=\"0\" y=\"0\" width=\"1286\" height=\"274\" rx=\"0\" ry=\"0\" stroke-width=\"0\"></rect></clipPath></g></g><g clip-path=\"url(#AmChartsEl-13)\"></g><g><g transform=\"translate(43,40)\"><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"middle\" transform=\"translate(92,291)\"><tspan y=\"5.5\" x=\"0\">12-26</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"middle\" transform=\"translate(275,291)\"><tspan y=\"5.5\" x=\"0\">12-27</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"middle\" transform=\"translate(459,291)\"><tspan y=\"5.5\" x=\"0\">12-28</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"middle\" transform=\"translate(643,291)\"><tspan y=\"5.5\" x=\"0\">12-29</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"middle\" transform=\"translate(826,291)\"><tspan y=\"5.5\" x=\"0\">12-30</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"middle\" transform=\"translate(1010,291)\"><tspan y=\"5.5\" x=\"0\">12-31</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"middle\" transform=\"translate(1193,291)\"><tspan y=\"5.5\" x=\"0\">01-01</tspan></text></g><g transform=\"translate(43,40)\" visibility=\"visible\"><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"end\" transform=\"translate(-12,271)\"><tspan y=\"5.5\" x=\"0\">10</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"end\" transform=\"translate(-12,237)\"><tspan y=\"5.5\" x=\"0\">20</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"end\" transform=\"translate(-12,203)\"><tspan y=\"5.5\" x=\"0\">30</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"end\" transform=\"translate(-12,169)\"><tspan y=\"5.5\" x=\"0\">40</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"end\" transform=\"translate(-12,135)\"><tspan y=\"5.5\" x=\"0\">50</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"end\" transform=\"translate(-12,100)\"><tspan y=\"5.5\" x=\"0\">60</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"end\" transform=\"translate(-12,66)\"><tspan y=\"5.5\" x=\"0\">70</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"end\" transform=\"translate(-12,32)\"><tspan y=\"5.5\" x=\"0\">80</tspan></text><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"end\" transform=\"translate(-12,-2)\"><tspan y=\"5.5\" x=\"0\">90</tspan></text></g></g><g><path cs=\"100,100\" d=\"M0.5,0.5 L1285.5,0.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0\" stroke=\"#000000\" transform=\"translate(0,20)\"></path><path cs=\"100,100\" d=\"M0.5,0.5 L1285.5,0.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"1\" stroke=\"#000000\" transform=\"translate(43,313)\"></path><path cs=\"100,100\" d=\"M0.5,0.5 L0.5,273.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"0\" stroke=\"#000000\" transform=\"translate(43,40)\" visibility=\"visible\"></path></g><g><g transform=\"translate(43,40)\" visibility=\"hidden\"><path cs=\"100,100\" d=\"M0.5,0.5 L0.5,0.5 L0.5,272.5\" fill=\"none\" stroke-width=\"1\" stroke-opacity=\"1\" stroke=\"#CC0000\" visibility=\"hidden\" transform=\"translate(388,0)\"></path></g></g><g><g visibility=\"visible\" transform=\"translate(43,20)\"><rect x=\"0.5\" y=\"0.5\" width=\"1285\" height=\"20\" rx=\"0\" ry=\"0\" stroke-width=\"0\" fill=\"#D4D4D4\" stroke=\"#D4D4D4\" fill-opacity=\"1\" stroke-opacity=\"1\"></rect><rect x=\"0.5\" y=\"0.5\" width=\"1285\" height=\"20\" rx=\"0\" ry=\"0\" stroke-width=\"0\" fill=\"#EFEFEF\" stroke=\"#EFEFEF\" fill-opacity=\"1\" stroke-opacity=\"1\" clip-path=\"url(#AmChartsEl-17)\"></rect><g transform=\"translate(0,0)\"></g><g transform=\"translate(0,0)\"></g><rect x=\"0.5\" y=\"0.5\" width=\"1285\" height=\"20\" rx=\"0\" ry=\"0\" stroke-width=\"0\" fill=\"#000\" stroke=\"#000\" fill-opacity=\"0.005\" stroke-opacity=\"0.005\"></rect><rect x=\"0.2142857142857082\" y=\"0.5\" width=\"1284.5714285714284\" height=\"20\" rx=\"0\" ry=\"0\" stroke-width=\"0\" fill=\"#000\" stroke=\"#000\" fill-opacity=\"0.005\" stroke-opacity=\"0.005\"></rect><g transform=\"translate(-5,1)\" visibility=\"visible\"><image x=\"0\" y=\"0\" width=\"11\" height=\"18\" xlink:href=\"/js/amcharts/images/dragIcon.gif\"></image><rect x=\"0.5\" y=\"0.5\" width=\"10\" height=\"20\" rx=\"0\" ry=\"0\" stroke-width=\"0\" fill=\"#000\" stroke=\"#000\" fill-opacity=\"0.005\" stroke-opacity=\"0.005\"></rect></g><g transform=\"translate(1279,1)\" visibility=\"visible\"><image x=\"0\" y=\"0\" width=\"11\" height=\"18\" xlink:href=\"/js/amcharts/images/dragIcon.gif\"></image><rect x=\"0.5\" y=\"0.5\" width=\"10\" height=\"20\" rx=\"0\" ry=\"0\" stroke-width=\"0\" fill=\"#000\" stroke=\"#000\" fill-opacity=\"0.005\" stroke-opacity=\"0.005\"></rect></g><clipPath id=\"AmChartsEl-17\"><rect x=\"0.2142857313156128\" y=\"0\" width=\"1284.5714111328125\" height=\"21\" rx=\"0\" ry=\"0\" stroke-width=\"0\"></rect></clipPath></g></g><g><g transform=\"translate(43,40)\"><circle r=\"3.5\" cx=\"0\" cy=\"0\" fill=\"#FFFFFF\" stroke=\"#00BBCC\" fill-opacity=\"1\" stroke-width=\"2\" stroke-opacity=\"1\" transform=\"translate(92,3)\"></circle><circle r=\"3.5\" cx=\"0\" cy=\"0\" fill=\"#FFFFFF\" stroke=\"#00BBCC\" fill-opacity=\"1\" stroke-width=\"2\" stroke-opacity=\"1\" transform=\"translate(275,164)\"></circle><circle r=\"3.5\" cx=\"0\" cy=\"0\" fill=\"#FFFFFF\" stroke=\"#00BBCC\" fill-opacity=\"1\" stroke-width=\"2\" stroke-opacity=\"1\" transform=\"translate(459,177)\"></circle><circle r=\"3.5\" cx=\"0\" cy=\"0\" fill=\"#FFFFFF\" stroke=\"#00BBCC\" fill-opacity=\"1\" stroke-width=\"2\" stroke-opacity=\"1\" transform=\"translate(643,147)\"></circle><circle r=\"3.5\" cx=\"0\" cy=\"0\" fill=\"#FFFFFF\" stroke=\"#00BBCC\" fill-opacity=\"1\" stroke-width=\"2\" stroke-opacity=\"1\" transform=\"translate(826,198)\"></circle><circle r=\"3.5\" cx=\"0\" cy=\"0\" fill=\"#FFFFFF\" stroke=\"#00BBCC\" fill-opacity=\"1\" stroke-width=\"2\" stroke-opacity=\"1\" transform=\"translate(1010,242)\"></circle><circle r=\"3.5\" cx=\"0\" cy=\"0\" fill=\"#FFFFFF\" stroke=\"#00BBCC\" fill-opacity=\"1\" stroke-width=\"2\" stroke-opacity=\"1\" transform=\"translate(1193,181)\"></circle></g></g><g><g></g></g><g></g><g><g transform=\"translate(1235,40)\" visibility=\"hidden\"><rect x=\"0.5\" y=\"0.5\" width=\"93\" height=\"29\" rx=\"0\" ry=\"0\" stroke-width=\"0\" fill=\"#000000\" stroke=\"#000000\" fill-opacity=\"0.15\" stroke-opacity=\"0.15\" visibility=\"hidden\"></rect><image x=\"0\" y=\"0\" width=\"16\" height=\"16\" xlink:href=\"/js/amcharts/images/lens.png\" transform=\"translate(7,6)\"></image><text y=\"5.5\" fill=\"#000000\" font-family=\"Verdana\" font-size=\"11\" text-anchor=\"start\" transform=\"translate(29,13)\"><tspan y=\"5.5\" x=\"0\">Show all</tspan></text></g></g><g></g><clipPath id=\"AmChartsEl-13\"><rect x=\"43\" y=\"40\" width=\"1285\" height=\"273\" rx=\"0\" ry=\"0\" stroke-width=\"0\"></rect></clipPath></svg></div>";
		service.sendMail("wangjiajun@58.com", "测试标题", content);
		//		for(int i = 50; i > 0; i--) {
//			service.sendMail(\"wangjiajun@58.com\", \"测试内容\", \"测试内容\");
//			System.out.println(\"主线程\"+ i + \"执行完成！！\");
//		}
//	}
	}
}
